{% load custom_filters %}

<nav>
    <a href="{% url 'home' %}">Home</a>
    <a href="{% url 'fixtures' %}">Fixtures</a>
    <a href="{% url 'results' %}">Results</a>
    <a href="{% url 'league_table' %}">League Table</a>
    <a href="{% url 'logout' %}">Logout</a>
</nav>

<h2>Upcoming Fixtures</h2>
{% if upcoming_fixtures %}
    {% for fixture in upcoming_fixtures %}
        <h3>{{ fixture }}</h3>
        
        <p><strong>Available Players:</strong></p>
        <ul>
            {% for player in fixture_availability|get_item:fixture %}
                {% if player.status == "yes" %}
                    <li>{{ player.player.username }}</li>
                {% endif %}
            {% empty %}
                <li>No players have confirmed availability yet.</li>
            {% endfor %}
        </ul>

        <p><strong>Unavailable Players:</strong></p>
        <ul>
            {% for player in fixture_availability|get_item:fixture %}
                {% if player.status == "no" %}
                    <li>{{ player.player.username }}</li>
                {% endif %}
            {% empty %}
                <li>No players have set availability yet.</li>
            {% endfor %}
        </ul>
    {% endfor %}
{% else %}
    <p>No upcoming fixtures.</p>
{% endif %}
