{% extends 'team/base.html' %}
{% load custom_filters %}
{% block content %}
<h2>Upcoming Fixtures</h2>

{% if upcoming_fixtures %}
    <form method="post">
        {% csrf_token %}
        <table>
            <tr>
                <th>Fixture</th>
                <th>Date</th>
                <th>Availability</th>
            </tr>
            {% for fixture in upcoming_fixtures %}
            <tr>
                <td>{{ fixture.opponent }}</td>
                <td>{{ fixture.date|date:"d/m/Y" }}</td>
                <td>
                    <select name="availability_{{ fixture.id }}">
                        <option value="yes" {% if fixture_availability|get_item:fixture.id == "yes" %}selected{% endif %}>Available</option>
                        <option value="no" {% if fixture_availability|get_item:fixture.id == "no" %}selected{% endif %}>Not Available</option>
                    </select>
                </td>
            </tr>
            {% endfor %}
        </table>
        <button type="submit">Save Availability</button>
    </form>
{% else %}
    <p>No upcoming fixtures.</p>
{% endif %}

{% if messages %}
    <ul>
        {% for message in messages %}
        <li>{{ message }}</li>
        {% endfor %}
    </ul>
{% endif %}

{% endblock %}
