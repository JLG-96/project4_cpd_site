{% extends 'team/base.html' %}

{% block content %}

    <h2>Player Dashboard</h2>

    {% if messages %}
        {% for message in messages %}
            <p style="color: green;">{{ message }}</p>
        {% endfor %}
    {% endif %}

    <h3>Set Availability for Upcoming Fixtures</h3>
    <form method="POST">
        {% csrf_token %}
        <table>
            <tr>
                <th>Fixture</th>
                <th>Your Availability</th>
            </tr>
            {% for fixture in upcoming_fixtures %}
                <tr>
                    <td>{{ fixture }}</td>
                    <td>
                        <select name="availability_{{ fixture.id }}">
                            <option value="yes" {% if fixture.id in available_fixtures %}selected{% endif %}>Available</option>
                            <option value="no" {% if fixture.id in unavailable_fixtures %}selected{% endif %}>Not Available</option>
                        </select>
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="2">No upcoming fixtures.</td>
                </tr>
            {% endfor %}
        </table>
        <button type="submit">Save Availability</button>
    </form>

{% endblock %}
